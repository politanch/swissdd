<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Predict vote shares • swissdd</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Predict vote shares">
<meta property="og:description" content="swissdd">
<meta name="twitter:card" content="summary">
<meta name="theme-color" content="#293c55">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-7425245790017381",
          enable_page_level_ads: true
     });
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">swissdd</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/plot_correlations.html">Find and plot correlated vote results</a>
    </li>
    <li>
      <a href="../articles/plot_voteshares.html">Plot vote shares</a>
    </li>
    <li>
      <a href="../articles/predict_voteshare.html">Predict vote shares</a>
    </li>
    <li>
      <a href="../articles/use_SwissvotesDB.html">Retrieve Swissvotes-Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/politanch/swissdd/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="predict_voteshare_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Predict vote shares</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/politanch/swissdd/blob/master/vignettes/predict_voteshare.Rmd"><code>vignettes/predict_voteshare.Rmd</code></a></small>
      <div class="hidden name"><code>predict_voteshare.Rmd</code></div>

    </div>

    
    
<div id="how-to-get-swissvotes-data" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-get-swissvotes-data" class="anchor"></a>How to get Swissvotes Data</h2>
<p>First, you have to make sure that your machine is connected to the internet. The function <code>get_swissvotes</code> fetches all data stored within the swissvotes database. Swissvotes offers one of the most comprehensive data platforms in relation to Swiss referendums and initiatives.</p>
<p><img src="https://swissvotes.ch/static/images/logo.svg"></p>
</div>
<div id="predict-vote-outcomes-with-data" class="section level1">
<h1 class="hasAnchor">
<a href="#predict-vote-outcomes-with-data" class="anchor"></a>Predict vote outcomes with <img src="https://swissvotes.ch/static/images/logo.svg" width="120"> Data</h1>
<p>This blogpost shows how to perform a simple prediction of vote outcomes based on Swissvotes data in just a few steps.</p>
<div id="retrieve-and-prepare-the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#retrieve-and-prepare-the-data" class="anchor"></a>1. Retrieve and prepare the data</h2>
<p>First, you have to make sure that your machine is connected to the internet. The function <code>get_swissvotes</code> fetches all data stored within the swissvotes database. Swissvotes offers one of the most comprehensive data platforms in relation to Swiss referendums and initiatives.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># installation from CRAN (stable)</span>
<span class="co"># install.packages("swissdd")</span>
<span class="co"># install.packages("dplyr")</span>

<span class="co"># installation from github (ongoing updates)</span>
<span class="co"># devtools::install_github("politanch/swissdd")</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/politanch/swissdd">swissdd</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></code></pre></div>
<p>By default, the function simply extracts the database provided by <a href="https://swissvotes.ch" target="_blank">Swissvotes</a>. However, you can specify that you want the codebook as well (or just the codebook for that matter). Additionally, there is a specification to save the citation. If you work with data from Swissvotes, please cite the data accordingly.</p>
<p>We first extract the data and the select the variables we need to make predictions. For some reason we may believe that the National Council represents the people. Therefore, we hope to see a pattern between the final votes in the National Council and the actual yes shares on a voting day.</p>
<p>We download and prettify the data. After that we calculate the share of yes votes in the National Council and create a scatterplot to inspect if our intuition about the relationship can be seen in the data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co">#extract data from database</span>
<span class="va">swissvotesdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_swissvotes.html">get_swissvotes</a></span><span class="op">(</span>DB<span class="op">=</span><span class="cn">T</span>, savecitation<span class="op">=</span><span class="cn">F</span>, codebook<span class="op">=</span><span class="cn">F</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co">#select variables we need</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">anr</span>, <span class="va">volkja.proz</span>, <span class="va">nrja</span>, <span class="va">nrnein</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co">#make numeric and rename variables</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>nrja <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">nrja</span><span class="op">)</span>,
         nrnein <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">nrnein</span><span class="op">)</span>,
         volkja.proz<span class="op">=</span> <span class="va">volkja.proz</span><span class="op">/</span><span class="fl">100</span><span class="op">)</span><span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>bfsnr<span class="op">=</span><span class="va">anr</span>, 
         yesshare <span class="op">=</span> <span class="va">volkja.proz</span><span class="op">)</span>

<span class="co">#clean data</span>
<span class="va">swissvotesdata</span><span class="op">[</span><span class="va">swissvotesdata</span><span class="op">==</span><span class="st">"."</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>

<span class="co">#calculate share of yes votes in national council</span>
<span class="va">swissvotesdata</span> <span class="op">&lt;-</span> <span class="va">swissvotesdata</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>nr_yesshare <span class="op">=</span> <span class="va">nrja</span> <span class="op">/</span> <span class="op">(</span><span class="va">nrja</span><span class="op">+</span><span class="va">nrnein</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>By default, function extracts only the database provided by <a href="https://swissvotes.ch" target="_blank">Swissvotes</a>. However, you can specify that you want the codebook as well (or just the codebook for that matter). Additionally, there is a specification to save the citation. If you work with data from Swissvotes, please cite the data accordingly.</p>
<p>First, we extract data from the database and select the variables we need to create our prediction. For some reason we might assume that the National Council represents the people. It this is the case, it should be reflected in a similar pattern in yes shares in the National Council and later on in the actual yes share of a popular vote.</p>
</div>
<div id="exploratory-analysis-is-our-assumption-accurate" class="section level2">
<h2 class="hasAnchor">
<a href="#exploratory-analysis-is-our-assumption-accurate" class="anchor"></a>2. Exploratory Analysis : is our assumption accurate?</h2>
<p>After downloading and preparing the data, we calculate the share of yes votes in the National Council and create a scatterplot to inspect if our intuition about the relationship can be seen in the data.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">plot1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">swissvotesdata</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">nr_yesshare</span>, y<span class="op">=</span> <span class="va">yesshare</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept<span class="op">=</span><span class="fl">.5</span>, linetype<span class="op">=</span><span class="st">"dashed"</span>, color<span class="op">=</span><span class="st">"grey70"</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_abline</a></span><span class="op">(</span>intercept <span class="op">=</span> <span class="fl">0</span>, slope<span class="op">=</span><span class="fl">1</span>, size<span class="op">=</span><span class="fl">.1</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>limits<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, labels<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/label_percent.html">percent</a></span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>limits<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, labels<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/label_percent.html">percent</a></span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span>, se<span class="op">=</span><span class="cn">T</span>, size<span class="op">=</span><span class="fl">.5</span>, color<span class="op">=</span><span class="st">"#FF6B00"</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y<span class="op">=</span><span class="st">"Actual Outcome of Vote"</span>, x<span class="op">=</span><span class="st">"Yes Share in National Council"</span>, caption<span class="op">=</span><span class="st">"politan.ch"</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">plot1</span></code></pre></div>
<p><img src="predict_voteshare_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>There seems to be a positive correlation (what a surprise!)… In a next step, we estimate a very basic model and then predict the vote shares for the two national votes on February 9th, 2020. In order to do so, we split the data into a training set and a prediction set.</p>
<p>There seems to be a positive correlation (what a surprise!)…</p>
</div>
<div id="predict-the-results-of-the-upcoming-votes" class="section level2">
<h2 class="hasAnchor">
<a href="#predict-the-results-of-the-upcoming-votes" class="anchor"></a>3. Predict the results of the upcoming votes</h2>
<p>In the last step we estimate a very basic model and then predict the vote shares for the two national votes on February 9th, 2020. In order to do so, we split the data into a training set and a prediction set.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#split data</span>
<span class="va">estimation_data</span> <span class="op">&lt;-</span> <span class="va">swissvotesdata</span><span class="op">[</span><span class="op">!</span><span class="va">swissvotesdata</span><span class="op">$</span><span class="va">bfsnr</span><span class="op">%in%</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6290</span>, <span class="fl">6300</span><span class="op">)</span>,<span class="op">]</span>
<span class="va">prediction_data</span> <span class="op">&lt;-</span> <span class="va">swissvotesdata</span><span class="op">[</span><span class="va">swissvotesdata</span><span class="op">$</span><span class="va">bfsnr</span><span class="op">%in%</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6290</span>, <span class="fl">6300</span><span class="op">)</span>,<span class="op">]</span>

<span class="co">#estimate a model</span>
<span class="va">fit_m1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">yesshare</span> <span class="op">~</span> <span class="va">nr_yesshare</span>, data<span class="op">=</span><span class="va">estimation_data</span><span class="op">)</span>

<span class="co">#predict</span>
<span class="va">prediction</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">fit_m1</span>, newdata <span class="op">=</span> <span class="va">prediction_data</span>, interval<span class="op">=</span><span class="st">"predict"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="va">as.data.frame</span>
<span class="va">prediction</span><span class="op">$</span><span class="va">bfsnr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6290</span>, <span class="fl">6300</span><span class="op">)</span></code></pre></div>
<p>We can now plot the predictions for the two ballots. Note, it is crucial to correctly report uncertainty, hence, we have to include the prediction interval as well.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">prediction</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">bfsnr</span><span class="op">)</span>, y<span class="op">=</span><span class="va">fit</span>, ymin<span class="op">=</span><span class="va">lwr</span>, ymax<span class="op">=</span><span class="va">upr</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_pointrange</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"#FF6B00"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">fit</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, nudge_x <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>limits<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, labels<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/label_percent.html">percent</a></span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Housing\nInitiative"</span>, <span class="st">"Law against\ndiscrimination"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept<span class="op">=</span><span class="fl">.5</span>, linetype<span class="op">=</span><span class="st">"dashed"</span>, color<span class="op">=</span><span class="st">"grey70"</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Simple Prediction of Vote-Shares"</span>, subtitle<span class="op">=</span><span class="st">"February 9th, 2020"</span>, y<span class="op">=</span><span class="st">"Predicted Yes-Share"</span>, x<span class="op">=</span><span class="st">""</span>, caption<span class="op">=</span><span class="st">"politan.ch"</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position<span class="op">=</span><span class="st">"none"</span>,
        axis.ticks.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
        panel.grid.major.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="predict_voteshare_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co">#add the points to the previous plot</span>
<span class="va">prediction_data</span><span class="op">$</span><span class="va">yesshare</span><span class="op">[</span><span class="va">prediction_data</span><span class="op">$</span><span class="va">bfsnr</span><span class="op">==</span><span class="fl">6290</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">prediction</span><span class="op">$</span><span class="va">fit</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>
<span class="va">prediction_data</span><span class="op">$</span><span class="va">yesshare</span><span class="op">[</span><span class="va">prediction_data</span><span class="op">$</span><span class="va">bfsnr</span><span class="op">==</span><span class="fl">6300</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">prediction</span><span class="op">$</span><span class="va">fit</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>

<span class="va">prediction_data</span><span class="op">$</span><span class="va">lwr</span><span class="op">[</span><span class="va">prediction_data</span><span class="op">$</span><span class="va">bfsnr</span><span class="op">==</span><span class="fl">6290</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">prediction</span><span class="op">$</span><span class="va">lwr</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>
<span class="va">prediction_data</span><span class="op">$</span><span class="va">lwr</span><span class="op">[</span><span class="va">prediction_data</span><span class="op">$</span><span class="va">bfsnr</span><span class="op">==</span><span class="fl">6300</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">prediction</span><span class="op">$</span><span class="va">lwr</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>

<span class="va">prediction_data</span><span class="op">$</span><span class="va">upr</span><span class="op">[</span><span class="va">prediction_data</span><span class="op">$</span><span class="va">bfsnr</span><span class="op">==</span><span class="fl">6290</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">prediction</span><span class="op">$</span><span class="va">upr</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>
<span class="va">prediction_data</span><span class="op">$</span><span class="va">upr</span><span class="op">[</span><span class="va">prediction_data</span><span class="op">$</span><span class="va">bfsnr</span><span class="op">==</span><span class="fl">6300</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">prediction</span><span class="op">$</span><span class="va">upr</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>

<span class="va">plot1</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">prediction_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">yesshare</span>, x<span class="op">=</span><span class="va">nr_yesshare</span><span class="op">)</span>, color<span class="op">=</span><span class="st">"#FF6B00"</span>, size<span class="op">=</span><span class="fl">3</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_linerange</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">prediction_data</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>ymin<span class="op">=</span><span class="va">lwr</span>, ymax<span class="op">=</span><span class="va">upr</span><span class="op">)</span>, color<span class="op">=</span><span class="st">"#FF6B00"</span><span class="op">)</span></code></pre></div>
<p><img src="predict_voteshare_files/figure-html/unnamed-chunk-6-2.png" width="700"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#how-to-get-swissvotes-data">How to get Swissvotes Data</a></li>
      <li>
<a href="#predict-vote-outcomes-with-data">Predict vote outcomes with <img src="https://swissvotes.ch/static/images/logo.svg" width="120"> Data</a><ul class="nav nav-pills nav-stacked">
<li><a href="#retrieve-and-prepare-the-data">1. Retrieve and prepare the data</a></li>
      <li><a href="#exploratory-analysis-is-our-assumption-accurate">2. Exploratory Analysis : is our assumption accurate?</a></li>
      <li><a href="#predict-the-results-of-the-upcoming-votes">3. Predict the results of the upcoming votes</a></li>
      </ul>
</li>
      </ul>
</div>
      <!-- codefund -->
   <!--<div id="codefund"><!-- fallback content </div> -->
<!--  <script src="https://codefund.app/properties/148/funder.js" async="async"></script>-->
  </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Thomas Lo Russo, Thomas Willi.</p>
</div>

<style>.bmc-button img{width: 27px !important;margin-bottom: 1px !important;box-shadow: none !important;border: none !important;vertical-align: middle !important;}.bmc-button{line-height: 36px !important;height:37px !important;text-decoration: none !important;display:inline-flex !important;color:#000000 !important;background-color:#FFFFFF !important;border-radius: 3px !important;border: 1px solid transparent !important;padding: 0px 9px !important;font-size: 17px !important;letter-spacing:-0.08px !important;box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;margin: 0 auto !important;font-family:'Lato', sans-serif !important;-webkit-box-sizing: border-box !important;box-sizing: border-box !important;-o-transition: 0.3s all linear !important;-webkit-transition: 0.3s all linear !important;-moz-transition: 0.3s all linear !important;-ms-transition: 0.3s all linear !important;transition: 0.3s all linear !important;}.bmc-button:hover, .bmc-button:active, .bmc-button:focus {-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;text-decoration: none !important;box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;opacity: 0.85 !important;color:#000000 !important;}</style>
<link href="https://fonts.googleapis.com/css?family=Lato&amp;subset=latin,latin-ext" rel="stylesheet">
<a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/politanch"><img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me a coffee"><span style="margin-left:5px">Buy me a coffee</span></a>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
